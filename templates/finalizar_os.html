{% extends "base.html" %}
{% block title %}Finalizar OS{% endblock %}

{% block content %}
<div class="mx-auto max-w-2xl rounded-3xl border border-slate-200/70 bg-white/80 p-8 shadow-soft">
  <div class="mb-6">
    <p class="text-xs font-semibold uppercase tracking-[0.3em] text-rose-500">Encerramento</p>
    <h2 class="mt-2 font-display text-2xl">Finalizar ordem de servico</h2>
    <p class="text-sm text-slate-500">
      OS #{{ os.id }} Â· {{ os.aparelho.nome }} ({{ os.aparelho.marca }} {{ os.aparelho.modelo }})
    </p>
  </div>

  {% if erro %}
    <div class="mb-4 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700">
      {{ erro }}
    </div>
  {% endif %}

  <div class="mb-6 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700">
    Ao finalizar, a OS sera marcada como concluida e nao deve mais receber manutencoes.
  </div>

  <form method="post" class="space-y-5">
    {% csrf_token %}

    <div>
      <label for="laudo" class="form-label">Laudo tecnico *</label>
      <textarea
        class="form-control min-h-[160px]"
        id="laudo"
        name="laudo"
        placeholder="Descreva o diagnostico, o que foi feito, pecas trocadas e orientacoes ao cliente..."
        required
      >{% if request.POST.laudo %}{{ request.POST.laudo }}{% endif %}</textarea>
    </div>

    <div class="flex flex-wrap items-center gap-3">
      <a href="{% url 'detalhe_os' os.id %}" class="text-sm font-semibold text-slate-600 hover:text-slate-900">
        Voltar
      </a>
      <button type="submit" class="rounded-2xl bg-rose-500 px-5 py-3 text-sm font-semibold text-white transition hover:-translate-y-0.5">
        Finalizar OS
      </button>
    </div>
  </form>
</div>
{% endblock %}
