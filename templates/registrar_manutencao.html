{% extends "base.html" %}
{% block title %}Registrar Manutenção{% endblock %}

{% block content %}
<div class="mx-auto max-w-2xl rounded-3xl border border-slate-200/70 bg-white/80 p-8 shadow-soft">
  <div class="mb-6">
    <p class="text-xs font-semibold uppercase tracking-[0.3em] text-amber-500">Manutencao</p>
    <h2 class="mt-2 font-display text-2xl">Registrar atendimento</h2>
    <p class="text-sm text-slate-500">
      OS #{{ ordem.id }} · {{ ordem.aparelho.nome }} ({{ ordem.aparelho.marca }} {{ ordem.aparelho.modelo }})
    </p>
  </div>

  <form method="post" enctype="multipart/form-data" class="space-y-5">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div>
      <label class="form-label">Tecnico responsavel</label>
      <input type="text" class="form-control bg-slate-50" value="{{ funcionario }}" disabled />
    </div>

    <div>
      <label class="form-label">Tipo de servico *</label>
      {{ form.tipo_servico }}
      {{ form.tipo_servico.errors }}
    </div>

    <div>
      <label class="form-label">Descricao da manutencao *</label>
      {{ form.descricao }}
      {{ form.descricao.errors }}
    </div>

    <div>
      <label class="form-label">Peca trocada</label>
      {{ form.peca_trocada }}
      {{ form.peca_trocada.errors }}
    </div>

    <div class="grid gap-4 sm:grid-cols-2">
      <div>
        <label class="form-label">Foto 1</label>
        {{ form.foto_1 }}
        <p class="mt-2 text-xs text-slate-400">Opcional. Ex: peça danificada.</p>
        {{ form.foto_1.errors }}
      </div>

      <div>
        <label class="form-label">Foto 2</label>
        {{ form.foto_2 }}
        <p class="mt-2 text-xs text-slate-400">Opcional. Ex: processo em andamento.</p>
        {{ form.foto_2.errors }}
      </div>

      <div class="sm:col-span-2">
        <label class="form-label">Foto 3</label>
        {{ form.foto_3 }}
        <p class="mt-2 text-xs text-slate-400">Opcional. Ex: servico concluido.</p>
        {{ form.foto_3.errors }}
      </div>
    </div>

    <div class="flex flex-wrap items-center gap-3">
      <a href="{% url 'detalhe_os' ordem.id %}" class="text-sm font-semibold text-slate-600 hover:text-slate-900">
        Voltar
      </a>
      <button type="submit" class="rounded-2xl bg-amber-500 px-5 py-3 text-sm font-semibold text-white transition hover:-translate-y-0.5">
        Salvar manutencao
      </button>
    </div>
  </form>
</div>
{% endblock %}
